
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Creating RasterFrames &#8212; rasterframes-book  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }
</style>
<div class="section" id="Creating&nbsp;RasterFrames">
<h1>Creating&nbsp;RasterFrames<a class="headerlink" href="#Creating RasterFrames" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Initialization">
<h2>Initialization<a class="headerlink" href="#Initialization" title="Permalink to this headline">¶</a></h2>
<p>There are a couple of setup steps necessary anytime you want to work
with RasterFrames in python. The first is to import pyspark and create a
session.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pyspark</span>
<span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="k">import</span> <span class="n">SparkSession</span>
<span class="kn">from</span> <span class="nn">pyrasterframes</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pyrasterframes.rasterfunctions</span> <span class="k">import</span> <span class="o">*</span>

<span class="c1"># Add other configuration options as needed</span>

<span class="n">spark</span> <span class="o">=</span> <span class="n">SparkSession</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span> \
    <span class="n">master</span><span class="p">(</span><span class="s2">&quot;local[*]&quot;</span><span class="p">)</span><span class="o">.</span> \
    <span class="n">appName</span><span class="p">(</span><span class="s2">&quot;RasterFrames&quot;</span><span class="p">)</span><span class="o">.</span> \
    <span class="n">config</span><span class="p">(</span><span class="s2">&quot;spark.ui.enabled&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span> \
    <span class="n">getOrCreate</span><span class="p">()</span><span class="o">.</span> \
    <span class="n">withRasterFrames</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Next, call the <code class="docutils literal"><span class="pre">withRasterFrames</span></code> method on it:</p>
<p>Now we are ready to create a RasterFrame. The most straightforward way
to create a <code class="docutils literal"><span class="pre">RasterFrame</span></code> is to read a
<a class="reference external" href="https://en.wikipedia.org/wiki/GeoTIFF">GeoTIFF</a> file.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">samplePath</span> <span class="o">=</span> <span class="s1">&#39;samples/L8-B4-Elkton-VA.tiff&#39;</span>
<span class="n">rf</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">geotiff</span><span class="p">(</span><span class="n">samplePath</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Let’s inspect the structure of what we get back:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">rf</span><span class="o">.</span><span class="n">printSchema</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
root
 |-- spatial_key: struct (nullable = false)
 |    |-- col: integer (nullable = false)
 |    |-- row: integer (nullable = false)
 |-- bounds: polygon (nullable = true)
 |-- metadata: map (nullable = true)
 |    |-- key: string
 |    |-- value: string (valueContainsNull = false)
 |-- tile: rf_tile (nullable = false)

</pre></div></div>
</div>
<p>As reported by Spark, RasterFrames extracts 6 columns from the GeoTIFF
we selected. Some of these columns are dependent on the contents of the
source data, and some are are always available. Let’s take a look at
these in more detail.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">spatial_key</span></code>: GeoTrellis assigns a <code class="docutils literal"><span class="pre">SpatialKey</span></code> or a
<code class="docutils literal"><span class="pre">SpaceTimeKey</span></code> to each tile, mapping it to the layer grid from
which it came. If it has a <code class="docutils literal"><span class="pre">SpaceTimeKey</span></code>, RasterFrames will split
it into a <code class="docutils literal"><span class="pre">SpatialKey</span></code> and a <code class="docutils literal"><span class="pre">TemporalKey</span></code> (the latter with
column name <code class="docutils literal"><span class="pre">temporal_key</span></code>).</li>
<li><code class="docutils literal"><span class="pre">bounds</span></code>: The bounding box of the tile in the tile’s native CRS.</li>
<li><code class="docutils literal"><span class="pre">metadata</span></code>: The TIFF format header tags found in the file.</li>
<li><code class="docutils literal"><span class="pre">tile</span></code> or <code class="docutils literal"><span class="pre">tile_n</span></code> (where <code class="docutils literal"><span class="pre">n</span></code> is a band number): For singleband
GeoTIFF files, the <code class="docutils literal"><span class="pre">tile</span></code> column contains the cell data split into
tiles. For multiband tiles, each column with <code class="docutils literal"><span class="pre">tile_</span></code> prefix
contains each of the sources bands, in the order they were stored.</li>
</ul>
<p>See the section <cite>Inspecting a
``RasterFrame`</cite> &lt;#inspecting-a–code-rasterframe–code-&gt;`__ (below) for
more details on accessing the RasterFrame’s metadata.</p>
</div>
<div class="section" id="Reading-a-GeoTrellis-Layer">
<h2>Reading a GeoTrellis Layer<a class="headerlink" href="#Reading-a-GeoTrellis-Layer" title="Permalink to this headline">¶</a></h2>
<p>If your imagery is already ingested into a <a class="reference external" href="https://docs.geotrellis.io/en/latest/guide/spark.html#writing-layers">GeoTrellis
layer</a>,
you can use the RasterFrames GeoTrellis DataSource. There are two parts
to this GeoTrellis Layer support. The first is the GeoTrellis Catalog
DataSource, which lists the GeoTrellis layers available at a URI. The
second part is the actual RasterFrame reader for pulling a layer into a
RasterFrame.</p>
<p>Before we show how all of this works we need to have a GeoTrellis layer
to work with. We can create one with the RasterFrame we constructed
above.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># how to overwrite a file</span>
<span class="n">base</span> <span class="o">=</span> <span class="s1">&#39;file:///tmp/gtrf&#39;</span>
<span class="n">rf</span><span class="o">.</span><span class="n">write</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;geotrellis&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mode</span><span class="p">(</span><span class="s1">&#39;overwrite&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;layer&#39;</span><span class="p">,</span> <span class="s1">&#39;sample&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;zoom&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Now we can point our catalog reader at the base directory and see what
was saved:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;geotrellis-catalog&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
<span class="n">cat</span><span class="o">.</span><span class="n">printSchema</span><span class="p">()</span>
<span class="n">cat</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
root
 |-- index: integer (nullable = false)
 |-- layer: struct (nullable = true)
 |    |-- base: struct (nullable = false)
 |    |    |-- uri: string (nullable = false)
 |    |-- id: struct (nullable = false)
 |    |    |-- name: string (nullable = true)
 |    |    |-- zoom: integer (nullable = false)
 |-- format: string (nullable = true)
 |-- keyClass: string (nullable = true)
 |-- path: string (nullable = true)
 |-- valueClass: string (nullable = true)
 |-- bounds: struct (nullable = true)
 |    |-- maxKey: struct (nullable = true)
 |    |    |-- col: long (nullable = true)
 |    |    |-- row: long (nullable = true)
 |    |-- minKey: struct (nullable = true)
 |    |    |-- col: long (nullable = true)
 |    |    |-- row: long (nullable = true)
 |-- cellType: string (nullable = true)
 |-- crs: string (nullable = true)
 |-- extent: struct (nullable = true)
 |    |-- xmax: double (nullable = true)
 |    |-- xmin: double (nullable = true)
 |    |-- ymax: double (nullable = true)
 |    |-- ymin: double (nullable = true)
 |-- layoutDefinition: struct (nullable = true)
 |    |-- extent: struct (nullable = true)
 |    |    |-- xmax: double (nullable = true)
 |    |    |-- xmin: double (nullable = true)
 |    |    |-- ymax: double (nullable = true)
 |    |    |-- ymin: double (nullable = true)
 |    |-- tileLayout: struct (nullable = true)
 |    |    |-- layoutCols: long (nullable = true)
 |    |    |-- layoutRows: long (nullable = true)
 |    |    |-- tileCols: long (nullable = true)
 |    |    |-- tileRows: long (nullable = true)

+-----+--------------------+------+--------------------+--------+--------------------+-------------+---------+--------------------+--------------------+--------------------+
|index|               layer|format|            keyClass|    path|          valueClass|       bounds| cellType|                 crs|              extent|    layoutDefinition|
+-----+--------------------+------+--------------------+--------+--------------------+-------------+---------+--------------------+--------------------+--------------------+
|    0|[[file:///tmp/gtr...|  file|geotrellis.spark....|sample/0|geotrellis.raster...|[[0,0],[0,0]]|uint16raw|+proj=utm +zone=1...|[709549.093643,70...|[[709549.093643,7...|
+-----+--------------------+------+--------------------+--------+--------------------+-------------+---------+--------------------+--------------------+--------------------+

</pre></div></div>
</div>
<p>As you can see, there’s a lot of information stored in each row of the
catalog. Most of this is associated with how the layer is discretized.
However, there may be other application specific metadata serialized
with a layer that can be use to filter the catalog entries or select a
specific one. But for now, we’re just going to load a RasterFrame in
from the catalog using a convenience function.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">first</span> <span class="o">=</span> <span class="n">cat</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;layer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">first</span><span class="p">[</span><span class="s1">&#39;layer&#39;</span><span class="p">][</span><span class="s1">&#39;base&#39;</span><span class="p">][</span><span class="s1">&#39;uri&#39;</span><span class="p">]</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">first</span><span class="p">[</span><span class="s1">&#39;layer&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">first</span><span class="p">[</span><span class="s1">&#39;layer&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">][</span><span class="s1">&#39;zoom&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">rfAgain</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;geotrellis&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;layer&#39;</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;zoom&#39;</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
<span class="n">rfAgain</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+-----------+--------------------+--------------------+
|spatial_key|              bounds|                tile|
+-----------+--------------------+--------------------+
|      [0,0]|POLYGON ((703986....|geotrellis.raster...|
+-----------+--------------------+--------------------+

</pre></div></div>
</div>
</div>
<div class="section" id="Writing-a-GeoTrellis-Layer">
<h2>Writing a GeoTrellis Layer<a class="headerlink" href="#Writing-a-GeoTrellis-Layer" title="Permalink to this headline">¶</a></h2>
<p><strong>TODO</strong></p>
</div>
<div class="section" id="Using-GeoTrellis-APIs">
<h2>Using GeoTrellis APIs<a class="headerlink" href="#Using-GeoTrellis-APIs" title="Permalink to this headline">¶</a></h2>
<p>If you are used to working directly with the GeoTrellis APIs, there are
a number of additional ways to create a <code class="docutils literal"><span class="pre">RasterFrame</span></code>, as enumerated
in the sections below.</p>
<div class="section" id="From-ProjectedExtent">
<h3>From <code class="docutils literal"><span class="pre">ProjectedExtent</span></code><a class="headerlink" href="#From-ProjectedExtent" title="Permalink to this headline">¶</a></h3>
<p>The simplest mechanism for getting a RasterFrame is to use the
<code class="docutils literal"><span class="pre">toRF(tileCols,</span> <span class="pre">tileRows)</span></code> extension method on <code class="docutils literal"><span class="pre">ProjectedRaster</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">scene</span> <span class="o">=</span> <span class="n">SinglebandGeoTiff</span><span class="p">(</span><span class="s2">&quot;../samples/L8-B8-Robinson-IL.tiff&quot;</span><span class="p">)</span>
<span class="n">rf</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">projectedRaster</span><span class="o">.</span><span class="n">toRF</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>
<span class="n">rf</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">false</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-3-9479bc86b8b8&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>scene <span class="ansi-blue-fg">=</span> SinglebandGeoTiff<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;../samples/L8-B8-Robinson-IL.tiff&#34;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> rf <span class="ansi-blue-fg">=</span> scene<span class="ansi-blue-fg">.</span>projectedRaster<span class="ansi-blue-fg">.</span>toRF<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">128</span><span class="ansi-blue-fg">,</span> <span class="ansi-cyan-fg">128</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span> rf<span class="ansi-blue-fg">.</span>show<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">5</span><span class="ansi-blue-fg">,</span> false<span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">NameError</span>: name &#39;SinglebandGeoTiff&#39; is not defined
</pre></div></div>
</div>
</div>
<div class="section" id="From-TileLayerRDD">
<h3>From <code class="docutils literal"><span class="pre">TileLayerRDD</span></code><a class="headerlink" href="#From-TileLayerRDD" title="Permalink to this headline">¶</a></h3>
<p>Another option is to use a GeoTrellis
<code class="docutils literal"><span class="pre">`LayerReader</span></code> &lt;<a class="reference external" href="https://docs.geotrellis.io/en/latest/guide/tile-backends.html">https://docs.geotrellis.io/en/latest/guide/tile-backends.html</a>&gt;`__,
to get a <code class="docutils literal"><span class="pre">TileLayerRDD</span></code> for which there’s also a <code class="docutils literal"><span class="pre">toRF</span></code> extension
method.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>tiledLayer: TileLayerRDD[SpatialKey] = ???
rf = tiledLayer.toRF
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Inspecting-a-RasterFrame">
<h2>Inspecting a <code class="docutils literal"><span class="pre">RasterFrame</span></code><a class="headerlink" href="#Inspecting-a-RasterFrame" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">RasterFrame</span></code> has a number of methods providing access to metadata
about the contents of the RasterFrame.</p>
<div class="section" id="Tile-Column-Names">
<h3>Tile Column Names<a class="headerlink" href="#Tile-Column-Names" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="nb">map</span><span class="p">(</span><span class="n">rf</span><span class="o">.</span><span class="n">tileColumns</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Spatial-Key-Column-Name">
<h3>Spatial Key Column Name<a class="headerlink" href="#Spatial-Key-Column-Name" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="nb">str</span><span class="p">(</span><span class="n">rf</span><span class="o">.</span><span class="n">spatialKeyColumn</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Temporal-Key-Column">
<h3>Temporal Key Column<a class="headerlink" href="#Temporal-Key-Column" title="Permalink to this headline">¶</a></h3>
<p>Returns an <code class="docutils literal"><span class="pre">Option[Column]</span></code> since not all RasterFrames have an
explicit temporal dimension.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="nb">map</span><span class="p">(</span><span class="n">rf</span><span class="o">.</span><span class="n">temporalKeyColumn</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Tile-Layer-Metadata">
<h3>Tile Layer Metadata<a class="headerlink" href="#Tile-Layer-Metadata" title="Permalink to this headline">¶</a></h3>
<p>The Tile Layer Metadata defines how the spatial/spatiotemporal domain is
discretized into tiles, and what the key bounds are.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>// NB: The `fold` is required because an `Either` is returned, depending on the key type.
rf.tileLayerMetadata.fold(_.toJson, _.toJson).prettyPrint
</pre></div>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, James Nachbar.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/Minis/creating-rasterframes.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>