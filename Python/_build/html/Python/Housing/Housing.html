
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Housing Case Study &#8212; rasterframes-book  documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }
</style>
<div class="section" id="Housing-Case-Study">
<h1>Housing Case Study<a class="headerlink" href="#Housing-Case-Study" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Introduction:">
<h2>Introduction:<a class="headerlink" href="#Introduction:" title="Permalink to this headline">¶</a></h2>
<p>Rasterframes is a powerful tool for combining geospatial data and spark
dataframes. In this case study, we will explore the rate of development
of a housing complex just outside of Charlottesville, Virginia, using
aerial imagery captured over the course of four years. This tutorial
assumes a basic knowledge of dataframes, more info can be found
<a class="reference external" href="https://spark.apache.org/docs/latest/sql-programming-guide.html#datasets-and-dataframes">here</a>:</p>
</div>
<div class="section" id="Background">
<h2>Background<a class="headerlink" href="#Background" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<img alt="" src="../../_images/Cascadia.png" />
</div>
<p><a class="reference external" href="http://southern-development.com/communities/cascadia/">Cascadia</a> is
a housing development built to the northeast of Charlottesville. The
land was rezoned in 2007, but we are going to analyze how long it took
to break land and clear away the forest previously there. This data is
available through NAIP (the National Agriculture Imagery Program) and
consists of three images taken over the course of 4 years. The pictures
have red, green, blue, and near-infrared bands and were taken during the
summer of 2012, 2014, and 2016. This is aerial imagery, and has a high
spatial resolution, which allows us a more precise measurement of the
progression of the development.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># Initial imports</span>

<span class="kn">import</span> <span class="nn">pyspark</span>
<span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="k">import</span> <span class="n">SparkSession</span>
<span class="kn">from</span> <span class="nn">pyrasterframes</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pyrasterframes.rasterfunctions</span> <span class="k">import</span> <span class="o">*</span>

<span class="c1"># Add other configuration options as needed</span>

<span class="n">spark</span> <span class="o">=</span> <span class="n">SparkSession</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span> \
    <span class="n">master</span><span class="p">(</span><span class="s2">&quot;local[*]&quot;</span><span class="p">)</span><span class="o">.</span> \
    <span class="n">appName</span><span class="p">(</span><span class="s2">&quot;RasterFrames&quot;</span><span class="p">)</span><span class="o">.</span> \
    <span class="n">config</span><span class="p">(</span><span class="s2">&quot;spark.ui.enabled&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span> \
    <span class="n">getOrCreate</span><span class="p">()</span><span class="o">.</span> \
    <span class="n">withRasterFrames</span><span class="p">()</span>

<span class="n">bandnums</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>We import our data from multiple bands using list comprehension.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">pyspark.sql.functions</span> <span class="k">import</span> <span class="n">lit</span>
<span class="n">RFs</span> <span class="o">=</span> <span class="p">[</span><span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">geotiff</span><span class="p">(</span><span class="s2">&quot;data/201</span><span class="si">{}</span><span class="s2">.tif&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span> \
       <span class="n">withColumn</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="n">lit</span><span class="p">(</span><span class="s2">&quot;201</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="p">)))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<p>Union joins the three rasterframes vertically, stacking them on top of
each other.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="k">import</span> <span class="n">reduce</span>
<span class="n">unionRF</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">rf1</span><span class="p">,</span> <span class="n">rf2</span><span class="p">:</span> <span class="n">rf1</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">rf2</span><span class="p">),</span> <span class="n">RFs</span><span class="p">)</span><span class="o">.</span><span class="n">asRF</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>We change the names of the tile columns (the default format is
“tile_#bandnumber#”)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">bandnums</span><span class="p">:</span>
    <span class="n">unionRF</span> <span class="o">=</span> <span class="n">unionRF</span><span class="o">.</span><span class="n">withColumnRenamed</span><span class="p">(</span><span class="s2">&quot;tile_</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">num</span><span class="p">),</span> <span class="s2">&quot;band_</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">unionRF</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+-----------+--------------------+--------------------+--------------------+--------------------+--------------------+--------------------+----+
|spatial_key|              bounds|            metadata|              band_1|              band_2|              band_3|              band_4|year|
+-----------+--------------------+--------------------+--------------------+--------------------+--------------------+--------------------+----+
|      [2,1]|POLYGON ((724502....|Map(TIFFTAG_DATET...|UByteRawArrayTile...|UByteRawArrayTile...|UByteRawArrayTile...|UByteRawArrayTile...|2012|
|      [0,0]|POLYGON ((724061 ...|Map(TIFFTAG_DATET...|UByteRawArrayTile...|UByteRawArrayTile...|UByteRawArrayTile...|UByteRawArrayTile...|2012|
|      [1,0]|POLYGON ((724281....|Map(TIFFTAG_DATET...|UByteRawArrayTile...|UByteRawArrayTile...|UByteRawArrayTile...|UByteRawArrayTile...|2012|
|      [0,1]|POLYGON ((724061 ...|Map(TIFFTAG_DATET...|UByteRawArrayTile...|UByteRawArrayTile...|UByteRawArrayTile...|UByteRawArrayTile...|2012|
|      [1,1]|POLYGON ((724281....|Map(TIFFTAG_DATET...|UByteRawArrayTile...|UByteRawArrayTile...|UByteRawArrayTile...|UByteRawArrayTile...|2012|
|      [2,0]|POLYGON ((724502....|Map(TIFFTAG_DATET...|UByteRawArrayTile...|UByteRawArrayTile...|UByteRawArrayTile...|UByteRawArrayTile...|2012|
+-----------+--------------------+--------------------+--------------------+--------------------+--------------------+--------------------+----+
only showing top 6 rows

</pre></div></div>
</div>
<p>As we can see, when we imported the geotiff the parser automatically
broke the image down into smaller sections. These sections are described
by the <code class="docutils literal"><span class="pre">spatial_key</span></code> column, and it appears that there are six
multiband tiles for each scene.</p>
</div>
<div class="section" id="Aggregate-Statistics">
<h2>Aggregate Statistics<a class="headerlink" href="#Aggregate-Statistics" title="Permalink to this headline">¶</a></h2>
<p>Aggregate statistics are an important tool for the analysis of tiles.
Aggregate statistics operate on a columnwise basis, so for instance,
<code class="docutils literal"><span class="pre">aggSum</span></code> finds the sum of all cells within a column, <code class="docutils literal"><span class="pre">aggMean</span></code>
performs a similar function, but finds the mean across every cell in the
column. <code class="docutils literal"><span class="pre">aggStats</span></code> is similar to <code class="docutils literal"><span class="pre">tileStats</span></code>, except it is
aggregated and computes statistics for all cells in a column. This is
the result of running <code class="docutils literal"><span class="pre">aggStats</span></code> across the red band:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">unionRF</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">aggStats</span><span class="p">(</span><span class="s2">&quot;band_1&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">truncate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+------------------------------------------------------------+
|aggStats(band_1)                                            |
+------------------------------------------------------------+
|[1014390,0,23.0,255.0,121.69001863188714,2521.3564791043373]|
+------------------------------------------------------------+

</pre></div></div>
</div>
<p>There are 1014390 data cells, 0 <code class="docutils literal"><span class="pre">NODATA</span></code> Cells, the min value is 23,
the max value is 255, the mean is 121.69, and the variance is 2521.36</p>
<div class="section" id="Local-Aggregate-Statistics">
<h3>Local Aggregate Statistics<a class="headerlink" href="#Local-Aggregate-Statistics" title="Permalink to this headline">¶</a></h3>
<p>Aggregate Statistics will often need to be conducted on a local, or
cellwise basis. Local aggregate functions take into account several
tiles over one band and output a tile, which has cells equal to that
function applied to each cell. For instance, <code class="docutils literal"><span class="pre">localAggSum</span></code> will return
a tile of the same size of the input tiles with the sum of all the cells
as the output cells, much in the same way that local arithmetic
functions operate (although local aggregated functions can operate on
more than two tiles at once). The diagram to the right is the process of
performing <code class="docutils literal"><span class="pre">localAdd</span></code> on two three by three tiles. There are other
local aggregate functions, such as <code class="docutils literal"><span class="pre">localAggMin</span></code>, <code class="docutils literal"><span class="pre">localAggMax</span></code>,
<code class="docutils literal"><span class="pre">localAggDataCells</span></code>, etc. A full list can be found in <a class="reference external" href="Link%20goes%20here">the
docs</a>.</p>
</div>
</div>
<div class="section" id="Masking">
<h2>Masking<a class="headerlink" href="#Masking" title="Permalink to this headline">¶</a></h2>
<p>This tiff is rectangular. However, the construction site is not
rectangular. For the sake of both computational speed and the reduction
of noise, it makes sense to only query the area we care about (the
construction site). In this section we will define the polygon that the
construction zone exists in and we will mask the tiles so that the only
data present is data that we are interested in (the bounds aren’t
perfect, but for the sake of simplicity they’ll have to do).</p>
<p>WKT is a standard format for describing geometries, and this is the
polygon around our construction site. <img alt="image0" src="../../_images/mask.png" /></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">wkt</span> <span class="o">=</span> <span class="s1">&#39;POLYGON((724126.644531979574822 4213614.33578644413501, 724188.64699058199767 4213607.733228079043329, 724258.830209883628413 4213571.59410769212991, 724323.732589938445017 4213586.129401290789247, 724448.262392850243486 4213551.541821997612715, 724550.148883086862043 4213550.183335460722446, 724603.129858009982854 4213631.692527649924159, 724649.318400250631385 4213593.654904628172517, 724703.657861710176803 4213343.693381914868951, 724677.170299930498004 4213257.010349686257541, 724638.602859201724641 4213262.724044609814882, 724620.985633189789951 4213180.351609473116696, 724561.467977744177915 4213240.821547405794263, 724485.285378773813136 4213211.776931547559798, 724442.172077926807106 4213245.923298499546945, 724409.61330969678238 4213231.327988603152335, 724366.950096154003404 4213234.6961370408535, 724342.250340945087373 4213266.132189124822617, 724264.782926880638115 4213231.327988603152335, 724203.03353885828983 4213241.432433916255832, 724143.529583127587102 4213296.445525063201785, 724084.025627396884374 4213336.863306314684451, 724126.644531979574822 4213614.33578644413501))&#39;</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">geomRF</span> <span class="o">=</span> <span class="n">unionRF</span><span class="o">.</span><span class="n">withColumn</span><span class="p">(</span><span class="s2">&quot;wkt&quot;</span><span class="p">,</span> <span class="n">lit</span><span class="p">(</span><span class="n">wkt</span><span class="p">))</span> \
<span class="o">.</span><span class="n">withColumn</span><span class="p">(</span><span class="s2">&quot;polygon&quot;</span><span class="p">,</span> <span class="n">st_geomFromWKT</span><span class="p">(</span><span class="s2">&quot;wkt&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>RasterFrames uses Geomesa to provide spatial querying functionality.
Here, we tranform the WKT into a polygon. The next step is to rasterize
the polygon, so that it can be masked.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">geomRF</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;polygon&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+--------------------+
|             polygon|
+--------------------+
|POLYGON ((724126....|
|POLYGON ((724126....|
|POLYGON ((724126....|
+--------------------+
only showing top 3 rows

</pre></div></div>
</div>
<p>However, in order to rasterize the polygon we must determine the
dimensions of the raster. Because we will be masking the polygon with
our bands, we want to determine the dimensions of our band tiles. We
then insert those dimensions into our rasterize function.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">geomRF</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">tileDimensions</span><span class="p">(</span><span class="s2">&quot;band_1&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">truncate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+-----------------+
|dimension(band_1)|
+-----------------+
|[221,255]        |
|[221,255]        |
|[221,255]        |
|[221,255]        |
|[221,255]        |
+-----------------+
only showing top 5 rows

</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">maskRF</span> <span class="o">=</span> <span class="n">geomRF</span><span class="o">.</span><span class="n">withColumn</span><span class="p">(</span><span class="s2">&quot;maskRaster&quot;</span><span class="p">,</span> <span class="n">rasterize</span><span class="p">(</span><span class="s2">&quot;polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;bounds&quot;</span><span class="p">,</span> <span class="n">lit</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="mi">221</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>Similarly to <code class="docutils literal"><span class="pre">noDataCells</span></code>, <code class="docutils literal"><span class="pre">aggNoDataCells</span></code> returns the number of
data cells in our polygon columns that have been set to noData as a
result of our rasterize function. It returns one value because it is
aggregating the result of <code class="docutils literal"><span class="pre">noDataCells</span></code> on each row, of which there
are 18 (6 tiles a scene for three scenes).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">maskRF</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">aggNoDataCells</span><span class="p">(</span><span class="s2">&quot;maskRaster&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+----------------------------+
|agg_nodata_cells(maskRaster)|
+----------------------------+
|                      427311|
+----------------------------+

</pre></div></div>
</div>
<p>It is now time to mask our tiles based on the geometry we have
generated. The mask functions compares two tiles, the mask tile and the
tile to be masked. Any cells in mask tile that are set to <code class="docutils literal"><span class="pre">NODATA</span></code>
have the corresponding cell in the tile to be masked set to <code class="docutils literal"><span class="pre">NODATA</span></code>.
Any cell in mask tile that is not <code class="docutils literal"><span class="pre">NODATA</span></code> has the corresponding cell
in the tile to be masked untouched. In the example below, the first tile
is the mask tile, with black areas representing <code class="docutils literal"><span class="pre">NODATA</span></code> values. The
second tile is the tile to be masked. The third tile is the result of
applying the mask, with the area masked set to <code class="docutils literal"><span class="pre">NODATA</span></code>. <img alt="image0" src="../../_images/mask.png" /> In
this case, the tiles to be masked are our four bands, and the masktile
is our maskRaster, which has cell values of 1 or <code class="docutils literal"><span class="pre">NODATA</span></code>, depending
on if the cell is outside of the polygon or not. Since masking requires
setting a tile to a value of <code class="docutils literal"><span class="pre">NODATA</span></code>, the tile cannot have a type of
raw.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">maskRF</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">cellType</span><span class="p">(</span><span class="s2">&quot;band_1&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+--------------------------+
|celltypeexpression(band_1)|
+--------------------------+
|                  uint8raw|
+--------------------------+
only showing top 1 row

</pre></div></div>
</div>
<p><code class="docutils literal"><span class="pre">convertCellType</span></code> allows us to change the cell type of the cells in a
tile.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">bandnums</span><span class="p">:</span>
    <span class="n">maskRF</span> <span class="o">=</span> <span class="n">maskRF</span><span class="o">.</span><span class="n">withColumn</span><span class="p">(</span><span class="s2">&quot;band_</span><span class="si">{}</span><span class="s2">_ND&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">convertCellType</span><span class="p">(</span><span class="s2">&quot;band_</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="s1">&#39;uint8&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">maskRF</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">cellType</span><span class="p">(</span><span class="s2">&quot;band_1_ND&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+-----------------------------+
|celltypeexpression(band_1_ND)|
+-----------------------------+
|                        uint8|
+-----------------------------+
only showing top 1 row

</pre></div></div>
</div>
<p>Now, time for the actual masking. We go across all four bands, using the
band tile as the tile to be masked and the rasterized polygon as the
mask tile.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">bandnums</span><span class="p">:</span>
    <span class="n">maskRF</span> <span class="o">=</span> <span class="n">maskRF</span> \
      <span class="o">.</span><span class="n">withColumn</span><span class="p">(</span><span class="s2">&quot;masked_</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">mask</span><span class="p">(</span><span class="n">maskRF</span><span class="p">[</span><span class="s2">&quot;band_</span><span class="si">{}</span><span class="s2">_ND&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)],</span> <span class="n">maskRF</span><span class="p">[</span><span class="s2">&quot;maskRaster&quot;</span><span class="p">]))</span><span class="o">.</span><span class="n">asRF</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>As we can see, around 2/5 of the data was essentially discarded because
it was outside of the area of interest.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">maskRF</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">aggDataCells</span><span class="p">(</span><span class="s2">&quot;masked_1&quot;</span><span class="p">),</span> <span class="n">aggNoDataCells</span><span class="p">(</span><span class="s2">&quot;masked_1&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">truncate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+------------------------+--------------------------+
|agg_data_cells(masked_1)|agg_nodata_cells(masked_1)|
+------------------------+--------------------------+
|587079                  |427311                    |
+------------------------+--------------------------+

</pre></div></div>
</div>
</div>
<div class="section" id="Tracking-construction-progress">
<h2>Tracking construction progress<a class="headerlink" href="#Tracking-construction-progress" title="Permalink to this headline">¶</a></h2>
<p>While more advanced methods exist, this tutorial will use simple
euclidian distance between the cell values of the scenes to determine
construction progress. We will analyze the contents of the scenes as a
whole, although a cell by cell implementation would certainly be
possible.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">scene1RF</span> <span class="o">=</span> <span class="n">maskRF</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s2">&quot;year == 2012&quot;</span><span class="p">)</span>
<span class="n">scene2RF</span> <span class="o">=</span> <span class="n">maskRF</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s2">&quot;year == 2014&quot;</span><span class="p">)</span>
<span class="n">scene3RF</span> <span class="o">=</span> <span class="n">maskRF</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s2">&quot;year == 2016&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">scene_to_vec</span><span class="p">(</span><span class="n">sceneRF</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">sceneRF</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">aggMean</span><span class="p">(</span><span class="s2">&quot;masked_</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">band</span><span class="p">)))</span><span class="o">.</span><span class="n">collect</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="n">bandnums</span><span class="p">]</span>

<span class="n">scene1vec</span> <span class="o">=</span> <span class="n">scene_to_vec</span><span class="p">(</span><span class="n">scene1RF</span><span class="p">)</span>
<span class="n">scene2vec</span> <span class="o">=</span> <span class="n">scene_to_vec</span><span class="p">(</span><span class="n">scene2RF</span><span class="p">)</span>
<span class="n">scene3vec</span> <span class="o">=</span> <span class="n">scene_to_vec</span><span class="p">(</span><span class="n">scene3RF</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Let’s analyze some basic components of these vectors</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">scene1vec</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[21]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>[88.74478392175499, 109.60768652941087, 94.43660733904636, 142.53991200502827]
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">scene3vec</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[22]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>[194.05995615581548, 186.765234321105, 167.4155948347667, 172.75533616429817]
</pre></div>
</div>
</div>
<p>Surprisingly, it seems that the intensity of all four bands has
increased, especially the red band, which makes sense because as forest
is cleared, more of the red clay soil of the region will be exposed. The
band that showed the least increase was the NIR band, which makes sense
because a primary source of NIR light is reflectance off of healthy
plant life.</p>
<div class="section" id="Compare-the-distance-between-vectors">
<h3>Compare the distance between vectors<a class="headerlink" href="#Compare-the-distance-between-vectors" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># Functions are defined</span>
<span class="k">def</span> <span class="nf">difference</span><span class="p">(</span><span class="n">vector1</span><span class="p">,</span> <span class="n">vector2</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">vector1</span><span class="p">[</span><span class="n">num</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vector2</span><span class="p">[</span><span class="n">num</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">bandnums</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">magnitude</span><span class="p">(</span><span class="n">vector</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">vector</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">vector</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">vector</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="o">.</span><span class="mi">5</span>
</pre></div>
</div>
</div>
<p>We are now ready to calculate the distance between these aggregated
vectors</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">magnitude</span><span class="p">(</span><span class="n">difference</span><span class="p">(</span><span class="n">scene3vec</span><span class="p">,</span> <span class="n">scene1vec</span><span class="p">)),</span> <span class="n">magnitude</span><span class="p">(</span><span class="n">difference</span><span class="p">(</span><span class="n">scene3vec</span><span class="p">,</span> <span class="n">scene2vec</span><span class="p">)),</span> <span class="n">magnitude</span><span class="p">(</span><span class="n">difference</span><span class="p">(</span><span class="n">scene2vec</span><span class="p">,</span> <span class="n">scene1vec</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[24]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>(152.58924325437388, 129.6981135683068, 22.922871990220944)
</pre></div>
</div>
</div>
<p>Assuming that the transition from forest to cleared forest is somewhat
linear, it appears that two years from the scene captured in 2012 they
are 15% of the way to completing the clearing of the land, whereas they
have totally finished in or before 4 years. This example is meant to be
lightweight and simple, but with more data could provide much more
precise estimates of construction activity. If we take a few major leaps
and assume that we can plot the progression by using the first and last
images as starting and ending points and that progression is roughly
linear, we can graph the progression with matplotlib.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">zipped_vecs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">scene1vec</span><span class="p">,</span> <span class="n">scene2vec</span><span class="p">,</span> <span class="n">scene3vec</span><span class="p">))</span>
<span class="n">zipped_vecs</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[25]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>[(88.74478392175499, 104.63142779762178, 194.05995615581548),
 (109.60768652941087, 121.14360247939375, 186.765234321105),
 (94.43660733904636, 105.74369548220938, 167.4155948347667),
 (142.53991200502827, 146.0248808082047, 172.75533616429817)]
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">years</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">2014</span><span class="p">,</span> <span class="mi">2016</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Years&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Intensity&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">zipped_vecs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;ro&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Red&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">zipped_vecs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;go&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Green&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">zipped_vecs</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;bo&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Blue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">zipped_vecs</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;yo&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;NIR&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">zipped_vecs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">))(</span><span class="n">years</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_dashes</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">zipped_vecs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">))(</span><span class="n">years</span><span class="p">),</span> <span class="s1">&#39;g&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_dashes</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">zipped_vecs</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">1</span><span class="p">))(</span><span class="n">years</span><span class="p">),</span> <span class="s1">&#39;b&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_dashes</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">zipped_vecs</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">1</span><span class="p">))(</span><span class="n">years</span><span class="p">),</span> <span class="s1">&#39;y&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_dashes</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/Python_Housing_Housing_47_0.png" src="../../_images/Python_Housing_Housing_47_0.png" />
</div>
</div>
<p>As is made more obvious by this graph, red increased the most, followed
by green and blue. While there are not many data points in this
analysis, the only thing that would change to incorporate other sources
of data would be importing it and changing a few variables. Due to its
modularity, RasterFrames has the ability to easily and elastically
adapt.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, James Nachbar.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../../_sources/Python/Housing/Housing.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>