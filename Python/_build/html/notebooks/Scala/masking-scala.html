
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Tile masking &#8212; rasterframes-book  documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }
</style>
<div class="section" id="Tile-masking">
<h1>Tile masking<a class="headerlink" href="#Tile-masking" title="Permalink to this headline">¶</a></h1>
<p>Masking is a common operation to use when performing analysis across
tiles. Tile masking allows one to compare two tiles, a value tile and a
masking tile. The masking tile can be thought of as being placed on top
of the other tile, obscuring certain values. Masking cells set to NODATA
are opaque, and cells that are anything else are transparent. In this
way, value cells that correspond to masking cells that are NODATA become
NODATA and value cells corresponding to other values are untouched.</p>
<p>Initial setup:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-scala"><div class="highlight"><pre>
<span></span><span class="k">import</span> <span class="nn">astraea.spark.rasterframes._</span>
<span class="k">import</span> <span class="nn">geotrellis.raster.io.geotiff.SinglebandGeoTiff</span>
<span class="k">import</span> <span class="nn">org.apache.spark.sql._</span>
<span class="k">import</span> <span class="nn">geotrellis.raster.</span><span class="o">{</span><span class="n">mask</span> <span class="k">=&gt;</span> <span class="k">_</span><span class="o">,</span> <span class="k">_</span><span class="o">}</span>
<span class="k">import</span> <span class="nn">geotrellis.raster.render._</span>
<span class="k">import</span> <span class="nn">org.apache.spark.sql.functions._</span>
<span class="k">import</span> <span class="nn">astraea.spark.rasterframes.stats.</span><span class="o">{</span><span class="nc">CellHistogram</span><span class="k">=&gt;</span><span class="nc">CH</span><span class="o">}</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="n">spark</span> <span class="k">=</span> <span class="nc">SparkSession</span><span class="o">.</span><span class="n">builder</span><span class="o">().</span>
    <span class="n">master</span><span class="o">(</span><span class="s">&quot;local&quot;</span><span class="o">).</span><span class="n">appName</span><span class="o">(</span><span class="s">&quot;RasterFrames&quot;</span><span class="o">).</span>
    <span class="n">config</span><span class="o">(</span><span class="s">&quot;spark.ui.enabled&quot;</span><span class="o">,</span> <span class="s">&quot;false&quot;</span><span class="o">).</span>
    <span class="n">getOrCreate</span><span class="o">().</span>
    <span class="n">withRasterFrames</span>

<span class="k">def</span> <span class="n">readTiff</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">SinglebandGeoTiff</span> <span class="o">=</span> <span class="nc">SinglebandGeoTiff</span><span class="o">(</span><span class="s">s&quot;../samples/</span><span class="si">$name</span><span class="s">&quot;</span><span class="o">)</span>

<span class="k">val</span> <span class="n">filenamePattern</span> <span class="k">=</span> <span class="s">&quot;L8-B%d-Elkton-VA.tiff&quot;</span>
<span class="k">val</span> <span class="n">bandNumbers</span> <span class="k">=</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">4</span>
<span class="k">val</span> <span class="n">bandColNames</span> <span class="k">=</span> <span class="n">bandNumbers</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">b</span> <span class="k">⇒</span> <span class="s">s&quot;band_</span><span class="si">$b</span><span class="s">&quot;</span><span class="o">).</span><span class="n">toArray</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[8]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>import astraea.spark.rasterframes._
import geotrellis.raster.io.geotiff.SinglebandGeoTiff
import org.apache.spark.sql._
import geotrellis.raster.{mask=&gt;_, _}
import geotrellis.raster.render._
import org.apache.spark.sql.functions._
import astraea.spark.rasterframes.stats.{CellHistogram=&gt;CH}
spark: org.apache.spark.sql.SparkSession = org.apache.spark.sql.SparkSession@4f8681b5
readTiff: (name: String)geotrellis.raster.io.geotiff.SinglebandGeoTiff
filenamePattern: String = L8-B%d-Elkton-VA.tiff
bandNumbers: scala.collection.immutable.Range.Inclusive = Range(1, 2, 3, 4)
bandColNames: Array[String] = Array(band_1, band_2, band_3, band_4)

</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [9]:
</pre></div>
</div>
<div class="input_area highlight-scala"><div class="highlight"><pre>
<span></span><span class="k">val</span> <span class="n">joinedRF</span> <span class="k">=</span> <span class="n">bandNumbers</span><span class="o">.</span>
  <span class="n">map</span> <span class="o">{</span> <span class="n">b</span> <span class="k">⇒</span> <span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">filenamePattern</span><span class="o">.</span><span class="n">format</span><span class="o">(</span><span class="n">b</span><span class="o">))</span> <span class="o">}.</span>
  <span class="n">map</span> <span class="o">{</span> <span class="k">case</span> <span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">f</span><span class="o">)</span> <span class="k">⇒</span> <span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">readTiff</span><span class="o">(</span><span class="n">f</span><span class="o">))</span> <span class="o">}.</span>
  <span class="n">map</span> <span class="o">{</span> <span class="k">case</span> <span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">t</span><span class="o">)</span> <span class="k">⇒</span> <span class="n">t</span><span class="o">.</span><span class="n">projectedRaster</span><span class="o">.</span><span class="n">toRF</span><span class="o">(</span><span class="s">s&quot;band_</span><span class="si">$b</span><span class="s">&quot;</span><span class="o">)</span> <span class="o">}.</span>
  <span class="n">reduce</span><span class="o">(</span><span class="k">_</span> <span class="n">spatialJoin</span> <span class="k">_</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[9]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>joinedRF: astraea.spark.rasterframes.RasterFrame = [spatial_key: struct&lt;col: int, row: int&gt;, band_1: rf_tile ... 3 more fields]

</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-scala"><div class="highlight"><pre>
<span></span><span class="n">joinedRF</span><span class="o">.</span><span class="n">select</span><span class="o">(</span><span class="n">cellType</span><span class="o">(</span><span class="n">$</span><span class="s">&quot;band_1&quot;</span><span class="o">)).</span><span class="n">show</span><span class="o">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+--------------------------+
|celltypeexpression(band_1)|
+--------------------------+
|                 uint16raw|
+--------------------------+

</pre></div></div>
</div>
<p>Because the tile has a cellType of raw, there is not a NODATA value. One
possible solution is to convert the CellType to something that does
support NODATA values. This transformation is wrapped into a threshold
function that creates a new tile based on whether the cell values in an
input tile are higher than a certain number.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [10]:
</pre></div>
</div>
<div class="input_area highlight-scala"><div class="highlight"><pre>
<span></span><span class="k">val</span> <span class="n">threshold</span> <span class="k">=</span> <span class="n">udf</span><span class="o">((</span><span class="n">t</span><span class="k">:</span> <span class="kt">Tile</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="o">{</span>
  <span class="n">t</span><span class="o">.</span><span class="n">convert</span><span class="o">(</span><span class="nc">IntConstantNoDataCellType</span><span class="o">).</span><span class="n">map</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">30000</span><span class="o">)</span> <span class="mi">1</span> <span class="k">else</span> <span class="nc">NODATA</span><span class="o">)</span>
  <span class="o">}</span> <span class="o">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[10]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>threshold: org.apache.spark.sql.expressions.UserDefinedFunction = UserDefinedFunction(&lt;function1&gt;,org.apache.spark.sql.gt.types.TileUDT@5673d5aa,Some(List(org.apache.spark.sql.gt.types.TileUDT@5673d5aa)))

</pre></div>
</div>
</div>
<p>First, we create a masking tile based on a previous one (in this case,
band_1 of the original tiff). This tile is full of either NODATA cells
or the unchanged cell values corresponsing to whether the value in the
input cell is greater than a threshold.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [11]:
</pre></div>
</div>
<div class="input_area highlight-scala"><div class="highlight"><pre>
<span></span><span class="k">val</span> <span class="n">withMaskTile</span> <span class="k">=</span> <span class="n">joinedRF</span><span class="o">.</span><span class="n">withColumn</span><span class="o">(</span><span class="s">&quot;maskTile&quot;</span><span class="o">,</span> <span class="n">threshold</span><span class="o">(</span><span class="n">joinedRF</span><span class="o">(</span><span class="s">&quot;band_1&quot;</span><span class="o">))).</span><span class="n">asRF</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[11]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>withMaskTile: astraea.spark.rasterframes.RasterFrame = [spatial_key: struct&lt;col: int, row: int&gt;, band_1: rf_tile ... 4 more fields]

</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="input_area highlight-scala"><div class="highlight"><pre>
<span></span><span class="n">withMaskTile</span><span class="o">.</span><span class="n">select</span><span class="o">(</span><span class="n">noDataCells</span><span class="o">(</span><span class="n">$</span><span class="s">&quot;maskTile&quot;</span><span class="o">)).</span><span class="n">show</span><span class="o">()</span>
</pre></div>
</div>
</div>
<div class="section" id="Mask">
<h2>Mask<a class="headerlink" href="#Mask" title="Permalink to this headline">¶</a></h2>
<p>Mask is an operation that takes two tiles and eliminates data from one
cell that corresponds to a value in the other. For instance, if a cell
in the masking tile contains a NODATA, the corresponding cell in the
other tile would be set to NODATA. If the masking cell contained
anything else, the corresponding cell would have its value untouched.
### Inverse Mask Inverse mask works in the opposite way; It doesn’t
touch the cells that are set to NODATA in the masking tile and all other
cells become NODATA.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [15]:
</pre></div>
</div>
<div class="input_area highlight-scala"><div class="highlight"><pre>
<span></span><span class="k">val</span> <span class="n">masked</span> <span class="k">=</span> <span class="n">withMaskTile</span>
  <span class="o">.</span><span class="n">withColumn</span><span class="o">(</span><span class="s">&quot;masked&quot;</span><span class="o">,</span> <span class="n">mask</span><span class="o">(</span><span class="n">joinedRF</span><span class="o">(</span><span class="s">&quot;band_2&quot;</span><span class="o">),</span> <span class="n">withMaskTile</span><span class="o">(</span><span class="s">&quot;maskTile&quot;</span><span class="o">))).</span><span class="n">asRF</span>
<span class="k">val</span> <span class="n">inversemasked</span> <span class="k">=</span> <span class="n">withMaskTile</span>
  <span class="o">.</span><span class="n">withColumn</span><span class="o">(</span><span class="s">&quot;inversemasked&quot;</span><span class="o">,</span> <span class="n">inverseMask</span><span class="o">(</span><span class="n">joinedRF</span><span class="o">(</span><span class="s">&quot;band_2&quot;</span><span class="o">),</span> <span class="n">withMaskTile</span><span class="o">(</span><span class="s">&quot;maskTile&quot;</span><span class="o">))).</span><span class="n">asRF</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;console&gt;:55: error: geotrellis.raster.ProjectedRaster[geotrellis.raster.Tile] does not take parameters
         .withColumn(&#34;masked&#34;, mask(joinedRF(&#34;band_2&#34;), withMaskTile(&#34;maskTile&#34;))).asRF
                                   ^

</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [16]:
</pre></div>
</div>
<div class="input_area highlight-scala"><div class="highlight"><pre>
<span></span><span class="k">val</span> <span class="n">maskRaster</span> <span class="k">=</span> <span class="n">masked</span><span class="o">.</span><span class="n">toRaster</span><span class="o">(</span><span class="n">masked</span><span class="o">(</span><span class="s">&quot;masked&quot;</span><span class="o">),</span> <span class="mi">466</span><span class="o">,</span> <span class="mi">428</span><span class="o">)</span>
<span class="k">val</span> <span class="n">inverseMaskRaster</span> <span class="k">=</span> <span class="n">inversemasked</span><span class="o">.</span><span class="n">toRaster</span><span class="o">(</span><span class="n">inversemasked</span><span class="o">(</span><span class="s">&quot;inversemasked&quot;</span><span class="o">),</span> <span class="mi">466</span><span class="o">,</span> <span class="mi">428</span><span class="o">)</span>
<span class="k">val</span> <span class="n">mask</span> <span class="k">=</span> <span class="n">withMaskTile</span><span class="o">.</span><span class="n">toRaster</span><span class="o">(</span><span class="n">withMaskTile</span><span class="o">(</span><span class="s">&quot;maskTile&quot;</span><span class="o">),</span> <span class="mi">466</span><span class="o">,</span> <span class="mi">428</span><span class="o">)</span>

<span class="k">val</span> <span class="n">brownToGreen</span> <span class="k">=</span> <span class="nc">ColorRamp</span><span class="o">(</span>
  <span class="nc">RGBA</span><span class="o">(</span><span class="mi">166</span><span class="o">,</span><span class="mi">97</span><span class="o">,</span><span class="mi">26</span><span class="o">,</span><span class="mi">255</span><span class="o">),</span>
  <span class="nc">RGBA</span><span class="o">(</span><span class="mi">223</span><span class="o">,</span><span class="mi">194</span><span class="o">,</span><span class="mi">125</span><span class="o">,</span><span class="mi">255</span><span class="o">),</span>
  <span class="nc">RGBA</span><span class="o">(</span><span class="mi">245</span><span class="o">,</span><span class="mi">245</span><span class="o">,</span><span class="mi">245</span><span class="o">,</span><span class="mi">255</span><span class="o">),</span>
  <span class="nc">RGBA</span><span class="o">(</span><span class="mi">128</span><span class="o">,</span><span class="mi">205</span><span class="o">,</span><span class="mi">193</span><span class="o">,</span><span class="mi">255</span><span class="o">),</span>
  <span class="nc">RGBA</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">133</span><span class="o">,</span><span class="mi">113</span><span class="o">,</span><span class="mi">255</span><span class="o">)</span>
<span class="o">).</span><span class="n">stops</span><span class="o">(</span><span class="mi">128</span><span class="o">)</span>

<span class="k">val</span> <span class="n">colors</span> <span class="k">=</span> <span class="nc">ColorMap</span><span class="o">.</span><span class="n">fromQuantileBreaks</span><span class="o">(</span><span class="n">maskRaster</span><span class="o">.</span><span class="n">tile</span><span class="o">.</span><span class="n">histogramDouble</span><span class="o">(),</span> <span class="n">brownToGreen</span><span class="o">)</span>

<span class="n">mask</span><span class="o">.</span><span class="n">tile</span><span class="o">.</span><span class="n">color</span><span class="o">(</span><span class="n">colors</span><span class="o">).</span><span class="n">renderPng</span><span class="o">().</span><span class="n">write</span><span class="o">(</span><span class="s">&quot;outputs/mask.png&quot;</span><span class="o">)</span>
<span class="n">maskRaster</span><span class="o">.</span><span class="n">tile</span><span class="o">.</span><span class="n">color</span><span class="o">(</span><span class="n">colors</span><span class="o">).</span><span class="n">renderPng</span><span class="o">().</span><span class="n">write</span><span class="o">(</span><span class="s">&quot;outputs/masked.png&quot;</span><span class="o">)</span>
<span class="n">inverseMaskRaster</span><span class="o">.</span><span class="n">tile</span><span class="o">.</span><span class="n">color</span><span class="o">(</span><span class="n">colors</span><span class="o">).</span><span class="n">renderPng</span><span class="o">().</span><span class="n">write</span><span class="o">(</span><span class="s">&quot;outputs/invmasked.png&quot;</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[16]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>maskRaster: geotrellis.raster.ProjectedRaster[geotrellis.raster.Tile] = ProjectedRaster(Raster(CroppedTile(geotrellis.raster.UShortRawArrayTile@35fb8da6,GridBounds(0,0,465,427)),Extent(703986.502389, 4249551.61978, 709549.093643, 4254601.8671)),utm-CS)
inverseMaskRaster: geotrellis.raster.ProjectedRaster[geotrellis.raster.Tile] = ProjectedRaster(Raster(CroppedTile(geotrellis.raster.UShortRawArrayTile@5b2cc14d,GridBounds(0,0,465,427)),Extent(703986.502389, 4249551.61978, 709549.093643, 4254601.8671)),utm-CS)
mask: geotrellis.raster.ProjectedRaster[geotrellis.raster.Tile] = ProjectedRaster(Raster(CroppedTile(IntConstantNoDataArrayTile([I@2e2b65ee,466,428),GridBounds(0,0,465,427)),Extent(703986.502389, 4249551.61978, 709549.093643, 4254601.8671)),utm-CS)
brownToGreen: geotrellis.raster.ren...
</pre></div>
</div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="29%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Mask</th>
<th class="head">Masked</th>
<th class="head">Inverse Masked</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><img alt="image0" src="../../_images/mask1.png" /></td>
<td><img alt="image1" src="../../_images/masked.png" /></td>
<td><img alt="image2" src="../../_images/invmasked.png" /></td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, James Nachbar.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../../_sources/notebooks/Scala/masking-scala.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>